<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scottish Regions Visited</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Roboto', sans-serif;
      background-color: #f9f9f9;
    }
    
    #main-nav {
      display: flex;
      justify-content: center;
      padding: 20px 0;
      background-color: #3079ab;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    #main-nav a {
      text-decoration: none;
      color: white;
      background-color: #26597b;
      padding: 10px 20px;
      border-radius: 5px;
      margin: 0 10px;
      transition: background-color 0.3s ease;
    }

    #main-nav a:hover {
      background-color: #1a4668;
    }

    #mapid {
      height: 50vh;
      width: calc(100% - 40px);
      margin: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    #city-search {
      width: 100%;
      background-color: #3079ab;
      padding: 10px;
      text-align: center;
      color: #FFFFFF;
    }

    h1 {
      font-size: 2em;
      margin-bottom: 0.5em;
    }

        /* Custom Checkbox Styles */
    .country-checkbox {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      background-color: #fff;
      border: 2px solid #141719;
      border-radius: 4px;
      display: inline-block;
      width: 1.2em;
      height: 1.2em;
      cursor: pointer;
      position: relative;
      outline: none; /* Removes the default focus outline */
      vertical-align: middle; /* Aligns the checkbox vertically with the text */
    }

    /* When the checkbox is checked, add a blue background */
    .country-checkbox:checked {
      background-color: #26597b;
    }

    /* Custom checkmark using a pseudo-element */
    .country-checkbox:checked::after {
      content: 'âœ”';
      color: white;
      position: absolute;
      left: 0.15em;
      top: -0.15em;
      font-size: 1.2em;
    }

    #country-list li {
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 5px; /* Add some padding around the list items */
    }

    label {
      display: flex;
      align-items: center;
      cursor: pointer; /* Indicates an interactive element */
    }


    @media (max-width: 768px) {
      #main-nav a {
        padding: 8px 15px;
        font-size: 0.9em;
      }

      #mapid {
        width: calc(100% - 20px);
        margin: 10px;
      }
    }
  </style>
  </head>
  <body>
    <nav id="main-nav">
      <a href="settings.html">Settings</a>
      <a href="index.html">Home</a>
      <a href="statistics.html">Statistics</a>
    </nav>
    <div id="mapid"></div>
    <div id="city-search">
      <h1>Scottish Regions Visited</h1>
      <div id="list-container">
        <ul id="country-list"></ul>
      </div>
    </div>
    <script>
      function getSavedColor() {
      return localStorage.getItem('mapHighlightColor') || 'green'; // Default to green
     }
      const countryData = {
          "Edinburgh": [
            [55.976782, -3.299074], [55.944991, -3.313078], [55.914033, -3.292710], [55.898061, -3.217372], [55.899265, -3.114782], [55.950405, -3.098846], [55.990403, -3.180461], [55.979642, -3.298012]
        ],
        "Aberdeen": [[57.21209, -2.05985],
[57.21879, -2.07805],
[57.22269, -2.09488],
[57.22697, -2.12887],
[57.2173, -2.13265],
[57.21581, -2.13712],
[57.21228, -2.14364],
[57.21284, -2.1615],
[57.21507, -2.17833],
[57.22943, -2.20754],
[57.23242, -2.26865],
[57.2168, -2.28239],
[57.20006, -2.29338],
[57.18256, -2.27552],
[57.15748, -2.25537],
[57.13716, -2.27838],
[57.12989, -2.27872],
[57.12553, -2.31191],
[57.1356, -2.34762],
[57.11136, -2.3593],
[57.10315, -2.3332],
[57.09531, -2.26039],
[57.10203, -2.21369],
[57.11434, -2.1663],
[57.11621, -2.13264],
[57.10025, -2.11941],
[57.09091, -2.11906],
[57.08662, -2.08609],
[57.10228, -2.07378],
[57.12466, -2.0518],
[57.14069, -2.04493],
[57.17746, -2.06371],
],
        "Highlands": [[56.68094, -6.17961],
[56.63714, -6.02301],
[56.55947, -5.94883],
[56.52765, -5.79498],
[56.49126, -5.68783],
[56.5423, -5.53947],
[56.64973, -5.38836],
[56.69503, -5.26748],
[56.62122, -5.32953],
[56.58945, -5.22788],
[56.61366, -5.15645],
[56.53872, -5.11799],
[56.52432, -5.0548],
[56.5675, -4.9243],
[56.57861, -4.77731],
[56.60228, -4.61343],
[56.70454, -4.59208],
[56.80424, -4.51815],
[56.77488, -4.43435],
[56.8268, -4.37529],
[56.81803, -4.25532],
[56.91028, -4.18475],
[56.89212, -4.00512],
[56.94237, -3.94743],
[56.92438, -3.84578],
[56.93638, -3.79724],
[57.07033, -3.75328],
[57.11709, -3.63856],
[57.24244, -3.52391],
[57.37603, -3.60359],
[57.51504, -3.73271],
[57.59614, -3.86184],
[57.60497, -4.09811],
[57.6937, -3.95342],
[57.85132, -3.75761],
[57.86887, -3.9829],
[57.9827, -3.88399],
[58.20542, -3.47372],
[58.31819, -3.13854],
[58.46798, -2.99568],
[58.68768, -3.00667],
[58.69054, -3.27591],
[58.64766, -3.57812],
[58.59901, -3.78142],
[58.57036, -3.97374],
[58.58469, -4.11111],
[58.55603, -4.31441],
[58.59615, -4.47926],
[58.56941, -4.64959],
[58.62382, -4.80894],
[58.62669, -5.01225],
[58.56367, -5.05071],
[58.49768, -5.1661],
[58.41716, -5.14961],
[58.37684, -5.27599],
[58.29316, -5.18258],
[58.27004, -5.29248],
[58.28449, -5.40237],
[58.22955, -5.44633],
[58.1165, -5.34193],
[58.1165, -5.4793],
[58.06711, -5.54524],
[57.97395, -5.51227],
[57.91853, -5.66612],
[57.88348, -5.77601],
[57.85132, -5.87492],
[57.66364, -5.83096],
[57.60479, -5.85844],
[57.53405, -5.90239],
[57.44542, -5.8969],
[57.34472, -5.80898],
[57.29229, -5.74671],
[57.25663, -5.66429],
[57.17031, -5.70825],
[57.08977, -5.79067],
[56.99707, -5.86759],
[56.90514, -5.97749],
[56.8601, -5.94452],
[56.82101, -5.93353],
[56.79393, -6.02145],
[56.75478, -6.26322]
], 
'Moray': [[57.6926, -2.82761],
[57.71094, -2.85233],
[57.69847, -2.90176],
[57.67792, -2.97455],
[57.6647, -3.02536],
[57.67645, -3.10089],
[57.68526, -3.1572],
[57.6992, -3.2135],
[57.72781, -3.28354],
[57.72072, -3.30826],
[57.72732, -3.33298],
[57.71412, -3.41675],
[57.70678, -3.45795],
[57.70678, -3.49915],
[57.69064, -3.49365],
[57.67596, -3.50327],
[57.67082, -3.52661],
[57.66715, -3.54996],
[57.66935, -3.59665],
[57.67229, -3.63235],
[57.66911, -3.65341],
[57.66225, -3.68591],
[57.65785, -3.71475],
[57.6527, -3.74084],
[57.64462, -3.76144],
[57.61816, -3.74634],
[57.59315, -3.73901],
[57.56665, -3.72253],
[57.54086, -3.71567],
[57.52465, -3.71567],
[57.51801, -3.68683],
[57.49146, -3.70605],
[57.45602, -3.69507],
[57.43607, -3.68958],
[57.42942, -3.60992],
[57.43163, -3.65387],
[57.44641, -3.58109],
[57.46266, -3.50967],
[57.45306, -3.49319],
[57.42252, -3.44696],
[57.42326, -3.40576],
[57.38701, -3.39066],
[57.36629, -3.39752],
[57.34925, -3.42224],
[57.32924, -3.45108],
[57.31887, -3.48129],
[57.29958, -3.49091],
[57.28697, -3.46481],
[57.27138, -3.40988],
[57.25876, -3.35907],
[57.26099, -3.3371],
[57.29958, -3.30826],
[57.33219, -3.31384],
[57.35518, -3.29873],
[57.3726, -3.25409],
[57.37556, -3.22867],
[57.41826, -3.16136],
[57.45277, -3.12313],
[57.48223, -3.04288],
[57.53537, -2.97831],
[57.55971, -2.91238],
[57.59139, -2.85606],
[57.65688, -2.81576]
], 'Glasgow': [[55.89009, -4.38816],
[55.89953, -4.37751],
[55.90858, -4.38576],
[55.91782, -4.38713],
[55.9209, -4.37992],
[55.92144, -4.36591],
[55.91932, -4.34978],
[55.91528, -4.34806],
[55.90816, -4.34806],
[55.90425, -4.33776],
[55.89886, -4.32506],
[55.89463, -4.31613],
[55.89694, -4.30343],
[55.90791, -4.30068],
[55.91502, -4.29279],
[55.92849, -4.29794],
[55.92887, -4.27287],
[55.91926, -4.26601],
[55.91348, -4.25674],
[55.90444, -4.24712],
[55.9056, -4.23888],
[55.90848, -4.2327],
[55.90771, -4.21451],
[55.91406, -4.1946],
[55.90733, -4.19219],
[55.90386, -4.17915],
[55.89828, -4.17331],
[55.89732, -4.16198],
[55.89058, -4.16198],
[55.88757, -4.17045],
[55.8841, -4.16633],
[55.8841, -4.12925],
[55.88449, -4.10316],
[55.88102, -4.08599],
[55.86992, -4.07958],
[55.86163, -4.07409],
[55.85643, -4.07409],
[55.85277, -4.08885],
[55.8441, -4.07409],
[55.84449, -4.08611],
[55.84275, -4.09812],
[55.8389, -4.10808],
[55.83138, -4.1122],
[55.82579, -4.11185],
[55.83273, -4.12936],
[55.83093, -4.13772],
[55.82784, -4.14733],
[55.82823, -4.15763],
[55.82514, -4.1645],
[55.82399, -4.17171],
[55.8344, -4.18166],
[55.83671, -4.19093],
[55.8317, -4.19368],
[55.84365, -4.20364],
[55.83922, -4.20261],
[55.83787, -4.20707],
[55.83498, -4.21874],
[55.83337, -4.22584],
[55.82909, -4.22945],
[55.82446, -4.22979],
[55.82292, -4.23563],
[55.81925, -4.2346],
[55.81416, -4.21626],
[55.80104, -4.21076],
[55.78831, -4.22724],
[55.7802, -4.22587],
[55.7856, -4.25471],
[55.81069, -4.26158],
[55.81069, -4.28767],
[55.80953, -4.31925],
[55.7968, -4.32887],
[55.79744, -4.35061],
[55.80207, -4.38563],
[55.82059, -4.37327],
[55.84681, -4.36915],
[55.87403, -4.35313]
], 'Aberdeenshire': [[57.6728, -2.79767],
[57.69558, -2.80316],
[57.70072, -2.78599],
[57.69264, -2.77363],
[57.6919, -2.74959],
[57.68382, -2.74409],
[57.6919, -2.71662],
[57.68566, -2.68365],
[57.68967, -2.6645],
[57.68159, -2.60405],
[57.68342, -2.57109],
[57.67461, -2.55669],
[57.67314, -2.52304],
[57.66653, -2.51205],
[57.67388, -2.49419],
[57.67265, -2.42253],
[57.67081, -2.38063],
[57.67596, -2.35865],
[57.67008, -2.34835],
[57.69138, -2.31538],
[57.69395, -2.29684],
[57.68073, -2.2467],
[57.67302, -2.18214],
[57.70056, -2.11826],
[57.69921, -2.00051],
[57.68342, -1.99501],
[57.6757, -1.9538],
[57.67607, -1.92702],
[57.64558, -1.88859],
[57.62168, -1.84257],
[57.61211, -1.81441],
[57.58605, -1.82724],
[57.56689, -1.82175],
[57.55215, -1.79977],
[57.53347, -1.80618],
[57.52129, -1.79656],
[57.50321, -1.76359],
[57.48697, -1.78351],
[57.47034, -1.77252],
[57.44694, -1.79839],
[57.4266, -1.8135],
[57.40958, -1.838],
[57.38774, -1.85792],
[57.35724, -1.91126],
[57.32523, -1.96415],
[57.29591, -1.99437],
[57.26348, -2.02414],
[57.22072, -2.05504],
[57.21489, -2.06168],
[57.22754, -2.12831],
[57.21043, -2.14685],
[57.21638, -2.17776],
[57.22977, -2.24576],
[57.22531, -2.27598],
[57.20596, -2.28765],
[57.18363, -2.28147],
[57.1583, -2.25675],
[57.13308, -2.27506],
[57.12525, -2.31696],
[57.12487, -2.35061],
[57.11294, -2.35474],
[57.10361, -2.30528],
[57.09614, -2.24896],
[57.10809, -2.18715],
[57.11741, -2.13014],
[57.09191, -2.11777],
[57.08743, -2.08893],
[57.05307, -2.11159],
[56.98092, -2.19795],
[56.90296, -2.2007],
[56.83386, -2.28862],
[56.79325, -2.33315],
[56.77594, -2.38055],
[56.74845, -2.4245],
[56.76314, -2.48586],
[56.78498, -2.53532],
[56.78648, -2.61224],
[56.84527, -2.67061],
[56.88958, -2.66099],
[56.94092, -2.7393],
[56.97688, -2.82585],
[56.98165, -2.9073],
[56.96817, -2.97255],
[56.96293, -3.0639],
[56.92432, -3.10237],
[56.89214, -3.10979],
[56.9124, -3.2032],
[56.92215, -3.28288],
[56.88313, -3.34881],
[56.88012, -3.49897],
[56.92064, -3.58414],
[56.92914, -3.77188],
[57.00629, -3.75814],
[57.07806, -3.73479],
[57.09474, -3.50996],
[57.11414, -3.33825],
[57.18495, -3.35886],
[57.25489, -3.205],
[57.27817, -3.06672],
[57.28337, -2.98018],
[57.31678, -2.95682],
[57.37561, -2.97185],
[57.41264, -3.02268],
[57.4617, -3.00734],
[57.49494, -2.9414],
[57.52889, -2.87753],
[57.51094, -2.78755],
[57.51611, -2.70326],
[57.56552, -2.73074],
[57.60162, -2.8008],
[57.65091, -2.77744]
], 'Fife': [[56.44784, -2.93639],
[56.41443, -3.02703],
[56.381, -3.15337],
[56.35367, -3.24059],
[56.32932, -3.27912],
[56.30798, -3.29561],
[56.28816, -3.3011],
[56.28739, -3.35055],
[56.26603, -3.39039],
[56.24084, -3.36841],
[56.23779, -3.32033],
[56.2248, -3.27912],
[56.19805, -3.27088],
[56.16823, -3.29835],
[56.14144, -3.37528],
[56.15216, -3.46594],
[56.15752, -3.58133],
[56.12919, -3.68299],
[56.08628, -3.71458],
[56.04792, -3.68985],
[56.03385, -3.48701],
[56.01004, -3.3936],
[56.05764, -3.26722],
[56.07145, -3.16282],
[56.1251, -3.14084],
[56.1695, -3.04285],
[56.20697, -2.96592],
[56.20621, -2.90548],
[56.1848, -2.84778],
[56.18709, -2.80108],
[56.21512, -2.71179],
[56.25255, -2.63624],
[56.2846, -2.58953],
[56.32271, -2.66096],
[56.341, -2.78185],
[56.3958, -2.80795],
[56.44216, -2.77361],
[56.45127, -2.87251],
], 'Skye': [[57.36684, -5.99089],
[57.41127, -6.006],
[57.46748, -5.97578],
[57.52065, -5.96067],
[57.573, -5.94556],
[57.58749, -5.97074],
[57.57349, -6.00371],
[57.54917, -6.02432],
[57.53811, -6.06003],
[57.55875, -6.11086],
[57.60222, -6.13696],
[57.64122, -6.18092],
[57.68263, -6.22625],
[57.72594, -6.25647],
[57.74575, -6.34164],
[57.75382, -6.4117],
[57.75162, -6.45016],
[57.73255, -6.45153],
[57.7142, -6.4584],
[57.69071, -6.43917],
[57.66499, -6.44741],
[57.62675, -6.43917],
[57.573, -6.43368],
[57.54499, -6.44741],
[57.58111, -6.49412],
[57.60835, -6.53258],
[57.61424, -6.59302],
[57.61424, -6.64248],
[57.58994, -6.6727],
[57.55089, -6.68781],
[57.52351, -6.67941],
[57.51909, -6.72886],
[57.49251, -6.77282],
[57.47183, -6.77282],
[57.45113, -6.81128],
[57.42451, -6.81128],
[57.39194, -6.77556],
[57.35934, -6.71512],
[57.33117, -6.63545],
[57.30594, -6.55577],
[57.25543, -6.49533],
[57.21676, -6.42665],
[57.18301, -6.38635],
[57.14129, -6.32316],
[57.11145, -6.27096],
[57.10697, -6.22151],
[57.10847, -6.1281],
[57.09652, -6.07315],
[57.06367, -6.08414],
[57.01731, -6.07865],
[56.99486, -6.0237],
[56.99936, -5.90831],
[57.06964, -5.86435],
[57.1383, -5.75995],
[57.20982, -5.67478],
[57.27673, -5.66654],
[57.2901, -5.75446],
[57.30792, -5.88084],
[57.34501, -5.95776]
], 'Dundee': [[56.44873, -3.06964],
[56.47037, -3.07033],
[56.50034, -3.05934],
[56.50868, -3.00302],
[56.51209, -2.93708],
[56.51209, -2.8787],
[56.50716, -2.82238],
[56.47985, -2.79811],
[56.46315, -2.82696],
[56.46277, -2.88534],
[56.46201, -2.93273],
[56.45594, -2.96295],
[56.45025, -2.99455],
[56.44911, -3.03438]
], 'Boarders': [[55.94432, -2.36368],
[55.93547, -2.37879],
[55.92624, -2.40077],
[55.91007, -2.42069],
[55.89659, -2.4461],
[55.88657, -2.47358],
[55.90583, -2.49556],
[55.90891, -2.52784],
[55.90544, -2.55669],
[55.89158, -2.56974],
[55.88053, -2.54799],
[55.86742, -2.53768],
[55.8493, -2.54867],
[55.84506, -2.57546],
[55.82962, -2.59538],
[55.83696, -2.63247],
[55.84544, -2.66956],
[55.8358, -2.71489],
[55.83824, -2.76365],
[55.83477, -2.79868],
[55.82088, -2.8447],
[55.82435, -2.86737],
[55.80814, -2.88316],
[55.81238, -2.89896],
[55.79694, -2.92918],
[55.81624, -2.94979],
[55.80119, -2.97383],
[55.78693, -3.00699],
[55.7707, -3.05095],
[55.75137, -3.08392],
[55.73513, -3.10315],
[55.72042, -3.10315],
[55.7181, -3.13886],
[55.75601, -3.16084],
[55.79388, -3.1787],
[55.79025, -3.20846],
[55.77866, -3.24761],
[55.7802, -3.28676],
[55.79411, -3.3108],
[55.80106, -3.34308],
[55.82191, -3.36987],
[55.81149, -3.4152],
[55.79218, -3.44336],
[55.78406, -3.44267],
[55.77325, -3.47084],
[55.75856, -3.45366],
[55.73729, -3.44405],
[55.71833, -3.42825],
[55.70936, -3.41019],
[55.69697, -3.41431],
[55.66986, -3.45484],
[55.65436, -3.4727],
[55.63381, -3.48849],
[55.62217, -3.48437],
[55.6148, -3.5091],
[55.61053, -3.53245],
[55.59125, -3.52329],
[55.57921, -3.51574],
[55.56328, -3.4862],
[55.54891, -3.49994],
[55.53491, -3.49651],
[55.51585, -3.48895],
[55.50224, -3.51093],
[55.48187, -3.51826],
[55.46746, -3.52306],
[55.45071, -3.53268],
[55.43356, -3.53817],
[55.42264, -3.5162],
[55.41094, -3.5004],
[55.41079, -3.44717],
[55.41157, -3.40596],
[55.41391, -3.35926],
[55.4412, -3.30981],
[55.43185, -3.29607],
[55.42561, -3.24662],
[55.39363, -3.29744],
[55.35458, -3.3153],
[55.34365, -3.2892],
[55.37177, -3.22189],
[55.35693, -3.18205],
[55.35224, -3.15595],
[55.35849, -3.1065],
[55.32723, -3.0859],
[55.29204, -3.0543],
[55.27247, -3.04606],
[55.26308, -3.0021],
[55.28189, -2.93541],
[55.27563, -2.90656],
[55.25997, -2.88733],
[55.23647, -2.9148],
[55.23412, -2.87359],
[55.21687, -2.87084],
[55.17452, -2.91205],
[55.1439, -2.88458],
[55.11091, -2.85299],
[55.13605, -2.81315],
[55.17295, -2.69776],
[55.21923, -2.67028],
[55.22471, -2.64006],
[55.28345, -2.6071],
[55.32178, -2.52238],
[55.35148, -2.47705],
[55.3546, -2.42348],
[55.3507, -2.3754],
[55.38038, -2.32732],
[55.41393, -2.30122],
[55.43109, -2.22155],
[55.46694, -2.16797],
[55.53387, -2.22796],
[55.62113, -2.31221],
[55.64751, -2.26825],
[55.68626, -2.20506],
[55.74045, -2.13501],
[55.78941, -2.08006],
[55.8064, -2.03198],
[55.84808, -2.0622],
[55.87893, -2.08693],
[55.89742, -2.13501],
[55.92771, -2.20552],
[55.92771, -2.27146],
[55.93233, -2.31954]
], 'Dumfries and Galloway': [[55.11868, -2.85986],
[55.14147, -2.88734],
[55.18935, -2.89695],
[55.23482, -2.86398],
[55.23795, -2.91344],
[55.27398, -2.8942],
[55.28728, -2.9519],
[55.27633, -3.02608],
[55.31388, -3.06454],
[55.35765, -3.11262],
[55.37457, -3.22664],
[55.34332, -3.30356],
[55.39642, -3.29944],
[55.42607, -3.24312],
[55.44478, -3.3173],
[55.41203, -3.36813],
[55.40735, -3.47253],
[55.40657, -3.51099],
[55.39252, -3.56456],
[55.36988, -3.57693],
[55.34489, -3.59066],
[55.31831, -3.625],
[55.29406, -3.6305],
[55.29798, -3.67034],
[55.33707, -3.71292],
[55.37457, -3.75138],
[55.41671, -3.79259],
[55.45517, -3.85487],
[55.45751, -3.93179],
[55.46296, -3.98674],
[55.44582, -4.02246],
[55.42555, -4.04581],
[55.40371, -4.09114],
[55.36936, -4.1035],
[55.34202, -4.1035],
[55.31466, -4.12136],
[55.29276, -4.13235],
[55.30449, -4.18455],
[55.3217, -4.2395],
[55.31232, -4.29033],
[55.28754, -4.33154],
[55.25168, -4.35849],
[55.22974, -4.36673],
[55.2127, -4.376],
[55.20531, -4.37834],
[55.19629, -4.39482],
[55.17589, -4.41131],
[55.1543, -4.40993],
[55.14056, -4.43329],
[55.16843, -4.44771],
[55.16843, -4.46488],
[55.15509, -4.47518],
[55.15352, -4.50747],
[55.15784, -4.55829],
[55.1454, -4.57936],
[55.14148, -4.59584],
[55.14148, -4.61988],
[55.1297, -4.64323],
[55.1187, -4.65353],
[55.09, -4.65834],
[55.07515, -4.63334],
[55.06596, -4.62538],
[55.0576, -4.63225],
[55.05121, -4.63431],
[55.04904, -4.64633],
[55.05534, -4.64667],
[55.05278, -4.66058],
[55.04924, -4.67483],
[55.0437, -4.68391],
[55.04331, -4.6949],
[55.03819, -4.71516],
[55.04488, -4.72684],
[55.04724, -4.74229],
[55.04114, -4.7756],
[55.03307, -4.78762],
[55.0435, -4.79861],
[55.04111, -4.82522],
[55.04366, -4.83827],
[55.03992, -4.88326],
[55.06216, -4.89768],
[55.06669, -4.91657],
[55.06452, -4.93374],
[55.04878, -4.93958],
[55.03618, -4.95022],
[55.02299, -4.95961],
[55.02358, -4.97403],
[55.01846, -4.98021],
[55.01177, -4.97609],
[55.01098, -4.98983],
[55.00704, -5.01181],
[54.99955, -5.03207],
[54.96933, -5.0221],
[54.92632, -4.98982],
[54.91526, -5.02622],
[54.95395, -5.05713],
[54.99181, -5.0743],
[55.01702, -5.09491],
[55.01427, -5.11963],
[55.01072, -5.16084],
[54.99378, -5.18076],
[54.97012, -5.18969],
[54.93698, -5.18969],
[54.90302, -5.17939],
[54.86837, -5.15604],
[54.84425, -5.13543],
[54.82169, -5.08804],
[54.79397, -5.04683],
[54.77553, -5.01768],
[54.74778, -4.99571],
[54.71327, -4.97098],
[54.68871, -4.97784],
[54.65772, -4.96616],
[54.63984, -4.92701],
[54.63029, -4.87138],
[54.63984, -4.84734],
[54.66011, -4.87344],
[54.68117, -4.8597],
[54.70618, -4.89542],
[54.73753, -4.90916],
[54.76754, -4.93114],
[54.80082, -4.94487],
[54.82814, -4.91053],
[54.84436, -4.86108],
[54.84752, -4.81987],
[54.83288, -4.79514],
[54.81864, -4.75736],
[54.81824, -4.72027],
[54.80042, -4.68982],
[54.77863, -4.64037],
[54.76714, -4.59779],
[54.73542, -4.5868],
[54.7259, -4.54834],
[54.71082, -4.53048],
[54.70116, -4.50232],
[54.69123, -4.45905],
[54.6813, -4.42745],
[54.67614, -4.39311],
[54.69083, -4.35602],
[54.71862, -4.3464],
[54.75908, -4.35258],
[54.78603, -4.3464],
[54.80702, -4.3361],
[54.82945, -4.39265],
[54.85319, -4.40776],
[54.88364, -4.39677],
[54.8615, -4.36518],
[54.83935, -4.3116],
[54.8255, -4.24498],
[54.80412, -4.21613],
[54.77361, -4.16462],
[54.76366, -4.11665],
[54.76841, -4.05896],
[54.76841, -3.95181],
[54.80803, -3.83367],
[54.85077, -3.754],
[54.8571, -3.63861],
[54.89821, -3.55619],
[54.96137, -3.46003],
[54.95033, -3.34464],
[54.96979, -3.145],
[54.99502, -3.07082],
[55.05961, -3.02137],
[55.05646, -2.9362]
], 'Loch Lomond and the Trossachs':[[56.27637, -4.70262],
[56.3404, -4.69163],
[56.39215, -4.58173],
[56.43016, -4.39491],
[56.41497, -4.32348],
[56.37542, -4.27952],
[56.32516, -4.26853],
[56.26263, -4.24106],
[56.20917, -4.21908],
[56.17247, -4.28502],
[56.14033, -4.33722],
[56.0959, -4.36469],
[56.06676, -4.46085],
[56.04152, -4.51283],
[56.00389, -4.58701],
[56.01772, -4.6296],
[56.06454, -4.64471],
[56.11974, -4.65982],
[56.17562, -4.69141],
[56.22454, -4.7024],
[56.32373, -4.72209]
], 'Ayr and Ayrshire': [[55.00005, -5.0334],
[55.03393, -5.05675],
[55.08273, -5.01829],
[55.15414, -4.99293],
[55.22944, -4.88304],
[55.32806, -4.85007],
[55.42696, -4.74567],
[55.45346, -4.66325],
[55.48757, -4.64802],
[55.52026, -4.65488],
[55.54359, -4.69472],
[55.55719, -4.66519],
[55.57954, -4.66972],
[55.59313, -4.68346],
[55.60886, -4.71265],
[55.62074, -4.74375],
[55.62928, -4.77397],
[55.63148, -4.80263],
[55.63703, -4.82823],
[55.66382, -4.84673],
[55.69211, -4.89206],
[55.71495, -4.91061],
[55.73855, -4.8955],
[55.74496, -4.88805],
[55.74869, -4.87706],
[55.75481, -4.86187],
[55.76104, -4.85895],
[55.7638, -4.86126],
[55.77078, -4.85915],
[55.77747, -4.86078],
[55.78399, -4.86387],
[55.78859, -4.86914],
[55.79409, -4.87207],
[55.81987, -4.89082],
[55.84611, -4.89288],
[55.86963, -4.89253],
[55.87458, -4.87857],
[55.87574, -4.84457],
[55.88595, -4.82293],
[55.89212, -4.80061],
[55.87651, -4.79924],
[55.86918, -4.78207],
[55.85473, -4.75871],
[55.8499, -4.7515],
[55.84761, -4.75623],
[55.84616, -4.76362],
[55.84501, -4.77186],
[55.84375, -4.78233],
[55.83932, -4.78285],
[55.83237, -4.7631],
[55.82774, -4.75177],
[55.82303, -4.73416],
[55.82014, -4.72283],
[55.81058, -4.72952],
[55.8047, -4.72025],
[55.80441, -4.68969],
[55.79485, -4.6791],
[55.78577, -4.67223],
[55.77687, -4.67106],
[55.76257, -4.65698],
[55.7761, -4.635],
[55.76334, -4.63431],
[55.7618, -4.61611],
[55.77436, -4.59004],
[55.78131, -4.57287],
[55.76779, -4.54951],
[55.7604, -4.54223],
[55.75034, -4.53605],
[55.75643, -4.51506],
[55.76252, -4.49429],
[55.75073, -4.48708],
[55.74851, -4.47179],
[55.74484, -4.45819],
[55.73401, -4.46917],
[55.73401, -4.44754],
[55.7255, -4.41835],
[55.71389, -4.3998],
[55.71931, -4.38504],
[55.6972, -4.35247],
[55.69875, -4.3322],
[55.68519, -4.30164],
[55.67861, -4.28344],
[55.68422, -4.26592],
[55.67764, -4.25734],
[55.67512, -4.24601],
[55.64639, -4.21562],
[55.63166, -4.21837],
[55.61963, -4.20532],
[55.60372, -4.17578],
[55.58276, -4.20463],
[55.563, -4.23966],
[55.54979, -4.22523],
[55.57, -4.14899],
[55.56715, -4.08672],
[55.58734, -4.04139],
[55.56792, -4.00773],
[55.5516, -3.95622],
[55.52983, -3.97545],
[55.49404, -4.02513],
[55.47224, -4.01414],
[55.46111, -3.98809],
[55.45517, -3.99754],
[55.45, -4.01144],
[55.44591, -4.01488],
[55.43734, -4.00149],
[55.42127, -4.04963],
[55.40957, -4.0874],
[55.37718, -4.10045],
[55.35961, -4.10526],
[55.34594, -4.09084],
[55.31918, -4.11882],
[55.29415, -4.1147],
[55.28555, -4.1408],
[55.31684, -4.19506],
[55.31605, -4.2349],
[55.30745, -4.27336],
[55.30823, -4.30015],
[55.29024, -4.31114],
[55.27263, -4.34136],
[55.23308, -4.36563],
[55.20408, -4.37799],
[55.17191, -4.40684],
[55.14417, -4.41597],
[55.16929, -4.451],
[55.15202, -4.4771],
[55.15634, -4.55059],
[55.13828, -4.60416],
[55.10331, -4.6668],
[55.06595, -4.62147],
[55.05178, -4.63384],
[55.04312, -4.71076],
[55.03656, -4.79662],
[55.04443, -4.85843],
[55.06096, -4.90239],
[55.05309, -4.93124],
[55.03065, -4.95116],
[55.01096, -4.98687]
]
 
      };
  const countries = Object.keys(countryData);

      const scotlandCenter = [56.4907, -4.2026]; 
      const zoomLevel = 7;
      const map = L.map("mapid").setView(scotlandCenter, zoomLevel);

      const tileLayer = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 100,
        minZoom: 5,
      });
      tileLayer.addTo(map);
      
      const countryOutlines = {};

      function suggestCountries() {
        const countryList = document.getElementById("country-list");
        countryList.innerHTML = "";
        countries.forEach(country => {
          const li = document.createElement("li");
          const state = getSavedCountryState(country);
          li.innerHTML = `
            <label>
              <input type="checkbox" class="country-checkbox" data-country="${country}" ${state.checked ? 'checked' : ''} onchange="toggleCountryHighlight('${country}')">
              ${country}
            </label>
          `;
          countryList.appendChild(li);

          if (state.checked) {
            // If the checkbox is checked, highlight the country
            toggleCountryHighlight(country);
          }
        });
      }

      function toggleCountryHighlight(countryName) {
      const checkbox = document.querySelector(`input[data-country="${countryName}"]`);
      const outlines = countryOutlines[countryName];
      const highlightColor = getSavedColor(); // Get the saved color

      if (checkbox.checked) {
        if (!outlines) {
          const polygonStyle = {
            color: 'black',
            fillColor: highlightColor, 
            fillOpacity: 0.5,
            weight: 0.5
          };
          // Use the saved color for the polygon
          const polygon = L.polygon(countryData[countryName], polygonStyle).addTo(map);
          const outline = L.polyline(countryData[countryName], { color: 'black', weight: 1}).addTo(map);
          map.fitBounds(polygon.getBounds());
          countryOutlines[countryName] = { polygon, outline };
        }
      } else {
        if (outlines) {
          map.removeLayer(outlines.polygon);
          map.removeLayer(outlines.outline);
          delete countryOutlines[countryName];
        }
      }

      saveCountryState(countryName, { checked: checkbox.checked, highlighted: Boolean(outlines) });
    }
       

      function saveCountryState(countryName, state) {
        const savedCountries = JSON.parse(localStorage.getItem('selectedCountries')) || {};
        savedCountries[countryName] = state;
        localStorage.setItem('selectedCountries', JSON.stringify(savedCountries));
      }

      function getSavedCountryState(countryName) {
        const savedCountries = JSON.parse(localStorage.getItem('selectedCountries')) || {};
        return savedCountries[countryName] || { checked: false, highlighted: false };
      }

      // Initial suggestions on page load
      suggestCountries();
    </script>
    </body>
</html>
